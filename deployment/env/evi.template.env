# Version: 1.1.0
# Purpose: Production deployment configuration template for evi (NON-SECRET values).
# Frontend/Backend/DB deployment file: evi.template.env
# Logic: User edits this file and uses it with `evictl` to render Quadlet units and proxy config.
#
# Changes in v1.1.0:
# - Version bump to match installer.
# - Clarified CORS comment.
#
# Changes in v1.0.0:
# - Initial production configuration contract.
#

# =========================
# Core
# =========================

# Public domain for accessing the application (DNS A/AAAA must point to host public IP)
EVI_DOMAIN=evi.example.com

# Optional contact email for Let's Encrypt (recommended)
EVI_ACME_EMAIL=admin@example.com

# Mode: "letsencrypt" or "manual"
EVI_TLS_MODE=letsencrypt

# Host ports (Caddy is the only container binding these ports)
EVI_HTTP_PORT=80
EVI_HTTPS_PORT=443

# =========================
# Images (registry references)
# =========================

# Proxy (Caddy)
EVI_PROXY_IMAGE=docker.io/caddy:2.8-alpine

# Application images (you will publish these to a registry)
EVI_FE_IMAGE=ghcr.io/evi-app/evi-fe:latest
EVI_BE_IMAGE=ghcr.io/evi-app/evi-be:latest
EVI_DB_IMAGE=ghcr.io/evi-app/evi-db:latest

# =========================
# Networking (internal)
# =========================

# Podman network name for internal communication
EVI_NETWORK=evi-net

# Backend internal port (not published on host; Caddy proxies to it)
EVI_BE_PORT=3000

# Frontend internal port (nginx in evi-fe image)
EVI_FE_PORT=80

# Database internal port
EVI_DB_PORT=5432

# =========================
# Backend configuration
# =========================

# NODE_ENV inside the backend container
EVI_NODE_ENV=production

# CORS allowed origins (comma-separated). Must include https://<domain>.
# Defaults to your EVI_DOMAIN using variable expansion.
EVI_CORS_ORIGINS=https://${EVI_DOMAIN}

# =========================
# Database configuration (non-secret)
# =========================

EVI_POSTGRES_DB=maindb
EVI_POSTGRES_USER=app_service

# Demo data seeding (true/false)
EVI_SEED_DEMO_DATA=false

# =========================
# Resource limits (optional)
# =========================

# Examples: "0.5", "1", "2"
EVI_LIMIT_CPU_PROXY=
EVI_LIMIT_CPU_FE=
EVI_LIMIT_CPU_BE=
EVI_LIMIT_CPU_DB=

# Examples: "512m", "1g", "2g"
EVI_LIMIT_MEM_PROXY=
EVI_LIMIT_MEM_FE=
EVI_LIMIT_MEM_BE=
EVI_LIMIT_MEM_DB=

# =========================
# Optional pgAdmin (disabled by default)
# =========================

EVI_PGADMIN_ENABLED=false
EVI_PGADMIN_IMAGE=docker.io/dpage/pgadmin4:8
# Bind pgAdmin on localhost only (recommended)
EVI_PGADMIN_HOST=127.0.0.1
EVI_PGADMIN_PORT=5050
